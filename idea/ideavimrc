let mapleader = " "

" Plugins
set commentary
set highlightedyank
set multiple-cursors
set NERDTree

" Options

set history=1000

set visualbell

set number
set relativenumber

set incsearch
set hlsearch

set ignorecase
set smartcase

set scrolloff=8
set sidescrolloff=8

set showcmd
set showmode

set ideajoin
set ideamarks

" Keymaps

" Clear search results (can't be <Esc> because it conflicts with multiple-cursors)
nnoremap <leader>l :nohlsearch<CR>

" Consistent yanking until end-of-line
nnoremap Y y$

" Window navigation
map <C-J> <C-W>j
map <C-K> <C-W>k
map <C-H> <C-W>h
map <C-L> <C-W>l

" Splitting windows
nmap <Leader>% :vsplit<CR>
nmap <Leader>" :split<CR>

" Move selection
vnoremap J :m '>+1<CR>gv=gv
vnoremap K :m '<-2<CR>gv=gv

" Center the view
" nnoremap <C-d> <C-d>zz
" nnoremap <C-u> <C-u>zz
nnoremap n nzz
nnoremap N Nzz

" Toggle project and terminal windows
map <Leader>p <Action>(ActivateProjectToolWindow)
map <Leader>t <Action>(ActivateTerminalToolWindow)
" Hide all windows
map <Leader>h <Action>(HideAllWindows)

" Open the switcher
map <Leader><Leader> <Action>(Switcher)

" Open the file structure
map <Leader>f <Action>(FileStructurePopup)

" Show intention actions
map <Leader>i <Action>(ShowIntentionActions)

" Toggle distraction free mode
map <Leader>z <Action>(ToggleDistractionFreeMode)

" Search everywhere
map <Leader>sf <Action>(SearchEverywhere)
" Find in files
map <Leader>sg <Action>(FindInPath)

" Refactor, reformat, rename...
map <Leader>rr <Action>(Refactorings.QuickListPopupAction)
map <Leader>rf <Action>(ReformatCode)
map <Leader>ri <Action>(OptimizeImports)
map <Leader>rn <Action>(RenameElement)
map <Leader>rm <Action>(RenameFile)

" Jump to next/previous errors
map ]d <Action>(GotoNextError)
map [d <Action>(GotoPreviousError)

" Jump to next/previous element under caret
map gn <Action>(GotoNextElementUnderCaretUsage)
map gN <Action>(GotoPrevElementUnderCaretUsage)

" Use built-in navigation
map <C-o> <Action>(Back)
map <C-i> <Action>(Forward)

" Remap multiple-cursors shortcuts to match terryma/vim-multiple-cursors
nmap <C-n> <Plug>NextWholeOccurrence
xmap <C-n> <Plug>NextWholeOccurrence
nmap g<C-n> <Plug>NextOccurrence
xmap g<C-n> <Plug>NextOccurrence
xmap <C-x> <Plug>SkipOccurrence
xmap <C-p> <Plug>RemoveOccurrence

" Note that the default <A-n> and g<A-n> shortcuts don't work on Mac due to dead keys.
" <A-n> is used to enter accented text e.g. Ã±
" Feel free to pick your own mappings that are not affected. I like to use <leader>
nmap <leader><C-n> <Plug>AllWholeOccurrences
xmap <leader><C-n> <Plug>AllWholeOccurrences
nmap <leader>g<C-n> <Plug>AllOccurrences
xmap <leader>g<C-n> <Plug>AllOccurrences
